/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=e.TextEditor||{},e.TextEditor.SourceHTML=t())}(this,(function(){"use strict";var e=function(e){return Array.isArray(e)},t=function(e){return"function"==typeof e},r=function(e,t){return e&&n(t)&&e instanceof t},o=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||r(e,Object))},n=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},i=function(e){return e.length},l=function t(){for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];for(var a,s=l.shift(),c=0,h=i(l);c<h;++c)for(var f in l[c])if(n(s[f]))if(e(s[f])&&e(l[c][f])){s[f]=[].concat(s[f]);for(var g=0,d=i(l[c][f]);g<d;++g)a=l[c][f][g],-1===s[f].indexOf(a)&&s[f].push(l[c][f][g])}else o(s[f])&&o(l[c][f])?s[f]=t({},s[f],l[c][f]):s[f]=l[c][f];else s[f]=l[c][f];return s},u=window.location,a=function(e,t){return function(e){return r(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,n(t)?t:"g"))},s={"":["","text goes here…"],a:["a","link text goes here…",{href:""}],area:["area",!1],b:["strong","text goes here…"],base:["base",!1,{href:""}],blockquote:["blockquote","quote goes here…"],br:["br",!1],button:["button","text goes here…",{name:"",type:"submit"}],caption:["caption","table caption goes here…"],code:["code","code goes here…"],col:["col",!1],dd:["dd","data goes here…"],dl:["dl",""],dt:["dt","title goes here…"],em:["em","text goes here…"],figcaption:["figcaption","image caption goes here…"],figure:["figure",""],h1:["h1","title goes here…"],h2:["h2","title goes here…"],h3:["h3","title goes here…"],h4:["h4","title goes here…"],h5:["h5","title goes here…"],h6:["h6","title goes here…"],hr:["hr",!1],i:["em","text goes here…"],img:["img",!1,{alt:"",src:""}],input:["input",!1,{name:"",type:"text"}],li:["li","list item goes here…"],link:["link",!1,{href:""}],meta:["meta",!1],ol:["ol",""],option:["option","option goes here…"],p:["p","paragraph goes here…"],param:["param",!1,{name:""}],pre:["pre","text goes here…"],q:["q","quote goes here…"],script:["script","code goes here…"],select:["select","",{name:""}],source:["source",!1,{src:""}],strong:["strong","text goes here…"],style:["style","code goes here…"],tbody:["tbody",""],td:["td","data goes here…"],textarea:["textarea","value goes here…",{name:""}],tfoot:["tfoot",""],th:["th","title goes here…"],thead:["thead",""],tr:["tr",""],track:["track",!1],u:["u","text goes here…"],ul:["ul",""],wbr:["wbr",!1]},c=function(e){return"</("+e+")>"},h=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"};function f(e){var t=this;t.k(!1).pop();var r=t.k();t&&!e.defaultPrevented&&t.keys[r]}return{attach:function(){var e,r,o=this;return o.state=l({elements:s},o.state),o.insertImage=function(e,r,n){return o.prompt(null!=e?e:"URL:",null!=r?r:u.protocol+"//",(function(e){var r,i,u,a;if(!e)return o;var s=o.$().value,c=null!=(r=o.state.elements.img)?r:[];c[0]=null!=(i=c[0])?i:"img",c[1]=null!=(u=c[1])?u:"",c[2]=l({},c[2]||{}),c[2].alt=s||(null!=(a=c[2].alt)?a:""),c[2].src=e,o.record().insertElement(c).record(),t(n)&&n.call(o,e)}))},o.insertLink=function(e,r,n){return o.prompt(null!=e?e:"URL:",null!=r?r:u.protocol+"//",(function(e){var r,i,u;if(!e)return o;var a=null!=(r=o.state.elements.a)?r:[];a[0]=null!=(i=a[0])?i:"a",a[1]=null!=(u=a[1])?u:"",a[2]=l({},a[2]||{}),a[2].href=e,o.record().wrapElement(a).record(),t(n)&&n.call(o,e)}))},o.toggleElementBlock=function(e,t,n){"string"==typeof e&&(r=a("^"+h("[\\w:.-]+")+"$","").exec(e))&&(e=[r[1]]);var i=o.$(),l=i.after,u=i.before,s=i.value;return(!n&&!a(h(e[0])+"$","").test(u)&&!a("^"+c(e[0]),"").test(l)||n&&!a("^"+h(e[0])+"[\\s\\S]*?"+c(e[0])+"$","").test(s))&&o.trim("\n","\n"),o.toggleElement(e,t,n)},"HTML"===(null==(e=o.state.source)?void 0:e.type)&&o.on("key.down",f),o},detach:function(){return this.off("key.down",f)}}}));